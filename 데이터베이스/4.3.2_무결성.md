# 4.3.1 무결성

## 무결성(Integrity)

- 데이터의 정확성, 일관성, 유효성을 유지하는 것
    - 정확성 : 실세계에 존재하는 객체의 표현 값의 정확한 반영 
        - 입력정확성 : 컬럼값은 오탈자 없이 정확히 입력 (예 : 한글성명은 최소 2자, 코드체계는 UTF-8)

    - 일관성 : 데이터가 지켜야할 구조, 값, 형태가 일관되게 정의되고 서로 일치해야 함
        - 선후관계 일관성 : 컬럼간 선후관계가 있을경우 값의 일관성 (예 : 입학날짜와 졸업날짜)

    - 유효성 : 컬럼값은 정해진 데이터 유효범위 및 도메인 충족 필요함
        - 범위 유효성 : 컬럼값은 주어진 범위 내에 존재 (예 : 키는 15cm ~ 300cm)
- 데이터의 무결성을 유지하는 것이 데이터베이스 관리시스템 (DBMS)의 최종 목표
- 주로 __데이터에 적용되는 연산에 제한__ 을 두어 데이터의 무결성을 유지


## 무결성(Intergrity) vs. 정합성(Consistency)

`무결성`

- 데이터 무결성은 데이터 값이 정확하고 완전해야 한다는 의미이다. 즉 말이 안 되는 데이터가 있으면 안 된다는 뜻이다.

`정합성`

- 데이터 정합성은 서로 모순이 없이 일관되게 일치해야 한다는 의미이다. 즉 어떤 데이터들의 값이 서로 일치해야 한다.


### 무결성과 정합성의 예시

- 무결성 훼손 예시
> 주문정보 테이블에서 고객번호가 모두 -1으로 입력되어 있고, 고객정보 테이블에도 -1의 값을 갖는 고객이 존재한다. (데이터의 값이 일치한다.) 그러나 고객번호는 반드시 1 이상의 값을 가져야 한다. (데이터의 값이 정확하지 않다.)
-> 데이터 정합성은 이상이 없으나, 데이터 무결성은 훼손된 경우

- 정합성 훼손 예시
> 위 예시에서 주문정보 테이블의 고객번호를 -1에서 2로 변경했지만, 고객정보 테이블에는 고객번호가 변경되지 않았을 때, (데이터의 값이 서로 일치하지 않는다.)
-? 데이터 정합성이 훼손되었다고 볼 수 있다.

<br>

## ⭐️ 데이터 `무결성 제약조건`의 종류와 개념

- 무결성 제약 조건(Constraint)
    - 데이터베이스에 저장된 데이터의 무결성을 보장하기 위함
    - 정확하지 않은 데이터가 데이터베이스 내에 저장되는 것을 방지하기 위한 제약조건

- 제약조건 4단계
    - 엔터티 무결성(Entity Integrity)
    - 참조 무결성(Referential Integrity)
    - 도메인 무결성(Domain Integrity)
    - 업무 무결성(Business Integrity)

참고 블로그

https://velog.io/@full_accel/%EA%B4%80%EA%B3%84%ED%98%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%AC%B4%EA%B2%B0%EC%84%B1Integrity


- 제약조건 7단계


### 1. 개체 무결성(Entity integrity)

- `기본 키 제약`이라고도 하며, 테이블은 기본키를 지정하고 그에 따른 무결성 원칙을 지켜야 하는 조건
    - 기본 키(Primary Key)에는 Null 값이 올 수 없음
    - 기본 키는 테이블 내에 오직 하나의 값만 존재해야 함
      (하나의 테이블 내에 동일한 기본 키를 가진 레코드는 존재할 수 없음)

** 기본 키란?

테이블에서 특정 레코드를 구별하기 위해 후보 키 중에서 선택된 고유한 식별자 키
 

### 2. 참조 무결성(Referential integrity)

- `외래 키 제약`이라고도 하며, 테이블 간의 참조 관계를 선언하는 제약조건
    - 외래 키(Foreign Key)의 값은 Null이거나 참조 릴레이션의 기본키 값과 동일해야 함
    - 외래 키 속성은 참조할 수 있는 값만 지녀야 함
      (즉, 외래 키 속성 값이 참조 테이블의 인스턴스에 반드시 존재하거나 Null이어야 함)

** 외래 키란?

한 테이블의 키 중에서 다른 테이블의 레코드를 유일하게 식별할 수 있는 키

 
### 3. 도메인 무결성(Domain integrity)
- 테이블에 존재하는 필드의 무결성을 보장하기 위한 것
- 필드의 타입, Null 값 허용 등에 대한 사항을 정의하고 올바른 데이터가 입력되었는지 확인하는 조건

ex) 주민등록번호 필드에 문자가 입력되는 경우엔 도메인의 무결성이 깨졌다고 볼 수 있음


### 4. Null무결성(Null integrity)
- 테이블의 특정 속성 값이 Null이 될 수 없게 하는 조건


### 5. 고유 무결성(Unique integrity)
- 테이블의 특정 속성에 대해 각 레코드들이 갖는 값들이 서로 달라야 하는 조건


### 6. 키 무결성(Key integrity)
- 하나의 테이블에는 적어도 하나의 키가 존재해야 하는 조건


### 7. 관계 무결성(Relationship integrity)
- 테이블의 어느 한 레코드의 삽입 가능 여부 또는 한 테이블과 다른 테이블의 레코드들 사이의 관계에 대한 적절성 여부를 지정한 조건
