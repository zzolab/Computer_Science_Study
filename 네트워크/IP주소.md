# IP 주소

- 2계층: MAC 주소
- 3계층: IP 주소

### IP 주소 특징

1. 사용자가 변경 가능한 논리 주소
2. 네트워크 주소 + 호스트 주소

## IP 주소 체계

- IPv4 주소 표기할 때 4개의 옥텟 단위로 나뉨
- 알아볼 수 있도록 8비트 옥텟을 10진수로 표기
  ![Untitled](https://user-images.githubusercontent.com/14107090/193401316-87edef1b-0d91-4fc8-a5ed-bb300bee9f57.png)
- 네트워크 주소와 호스트 주소 구분 경계점이 고정되어 있지 않음

## 클래스풀

![Untitled](https://user-images.githubusercontent.com/14107090/193401389-e67e1f48-df01-4bb1-af8c-d6c8d7e02a9f.png)
![Untitled](https://user-images.githubusercontent.com/14107090/193401405-a566202e-83a1-4b46-aafe-ebdddccb8d83.png)

출처 : [https://ko.wikipedia.org/wiki/네트워크\_클래스](https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%ED%81%B4%EB%9E%98%EC%8A%A4)

- A 클래스 : 0\~127 (0 0000000\~0 1111111)
  - $2^8$개의 네트워크
  - 한 네트워크 당 $2^{24}$개의 호스트
- B 클래스 : 128\~191 (10 000000\~10 111111)
  - $2^{14}$개의 네트워크
  - 한 네트워크 당 $2^{16}$개의 호스트
- C 클래스 : 192\~223 (110 00000\~110 11111)
  - $2^{21}$개의 네트워크
  - 한 네트워크 당 $2^8$개의 호스트

### 네트워크에서 사용 가능한 호스트 개수 구하는 법

네트워크 주소: 172.16.0.0

브로드캐스트 주소: 172.16.255.255

유효 IP 범위: 172.0.1~172.16.255.254(네트워크 주소와 브로드캐스트 주소는 제외)

$2^8\times2^8-2=2^{16}-2=65534$

A클래스: $2^{24}-2개$

B클래스: $2^{16}-2개$

C클래스: $2^8-2개$

### 장점

1. 네트워크 주소와 호스트 주소 나누는 구분자를 이동시켜 네트워크 크기 다르게 부여 가능
   - 큰 네트워크, 작은 네트워크 필요로하는 조직
2. 맨 앞 옥텟의 주소만 보고 어느 클래스인지 구분 가능

### 단점

- 호스트 숫자는 폭발적으로 증가하는데 낭비되는 네트워크 수가 너무 많음
  - IP 개수 이론상으로 43억개
  - 하나의 네트워크에서 IP가 사용되지 않더라도 다른 네트워크에서 사용 불가능
- A 클래스 부여 받았지만 실제로는 수천, 수만 개만 사용하고 나머지 수천만 개의 IP 낭비되는 사례

### 해결책

1. 클래스리스, CIDR(Classless Inter-Domain Routing) 기반 주소 체계
2. NAT와 사설 IP 주소
3. IPv6

## 클래스리스

- 현재 사용하는 주소 체계는 클래스 개념 적용하지 않는 클래스리스 기반 주소 체계

## 서브넷 마스크

- 네트워크 주소와 호스트 주소 나누는 구분자
- 2진수의 AND 연산을 하면 IP주소에서 네트워크 주소가 나오게 된다
  - 서브넷 마스크가 2진수 1인 부분은 IP 숫자가 그대로 연산
  - 2진수 0인 부분은 모두 0으로 변경

![Untitled](https://user-images.githubusercontent.com/14107090/193401444-85100def-6f2c-4369-ab3c-a41a4e279957.png)
출처 : [https://greendreamtrre.tistory.com/248](https://greendreamtrre.tistory.com/248)

### 서브넷 마스크 표현 방법

**비트**

- 서브넷 마스크에서 1 부분이 연속된 자릿수를 표현해주는 것
- IP 주소가 192.168.0.1/24 라면 뒤에 /24는 서브넷 마스크
  - 32비트 중 앞에서부터 차례대로 1의 개수가 24개라는 의미
- 클래스
  - A클래스: /8(첫 번째 옥텟이 1, 나머지 옥텟이 0)
  - B클래스: /16(첫 번째, 두 번째 옥텟이 1, 나머지 옥텟이 0)
  - C클래스: /24(세 번째까지의 옥텟이 1, 나머지 옥텟이 0)

**10진수**

- 클래스
  - A클래스: 255.0.0.0
  - B클래스: 255.255.0.0
  - C클래스: 255.255.255.0

출처 : [https://bamdule.tistory.com/191](https://bamdule.tistory.com/191)

## 서브네팅

<aside>
💡 원래 부여된 클래스의 기준을 무시하고 새로운 네트워크-호스트 구분 기준을 사용자가 정해 원래 클래스풀 단위의 네트워크보다 더 쪼개 사용하는 것

</aside>

| IP 주소       | 103.9.32.146    |
| ------------- | --------------- |
| 서브넷        | 255.255.255.192 |
| 네트워크 주소 | 103.9.32.128    |

> 퀴즈: 103.9.32.146/00 → 00에 들어가는 수는?

| IP 주소       | 01100111 | 00001001 | 00100000 | 10010010 |
| ------------- | -------- | -------- | -------- | -------- |
| 서브넷        | 11111111 | 11111111 | 11111111 | 11000000 |
| 네트워크 주소 | 01100111 | 00001001 | 00100000 | 10000000 |

> 퀴즈: IP주소의 호스트 부분은?

- Host ID를 Network ID로 변환하기 위해 1bit씩 가져올 때마다 네트워크의 크기는 2의 배수로 증가하고 “네트워크 당” 호스트의 수는 2로 나누어지게 된다.
  ![Untitled](https://user-images.githubusercontent.com/14107090/193401472-4296658d-bd29-49fe-b62d-1f5245ce9ca6.png)

출처 : [https://velog.io/@soo5717/subnet-mask-and-subnetting](https://velog.io/@soo5717/subnet-mask-and-subnetting)

> 퀴즈 : 위 예시에서 네트워크 주소, 브로드캐스트 주소, 유효 IP 주소를 구하시오

1. 네트워크가 103.9.32.128
2. 서브넷 255.255.255.192

정답

- 브로드캐스트 주소: 103.9.32.191(마지막 주소)
- 유효 IP 범위: 103.9.32.129~103.9.32.190(네트워크 주소, 브로드캐스트 주소 제외)

| 네트워크 주소     | 103.9.32.128 | 01100111 | 00001001 | 00100000 | 10000000 |
| ----------------- | ------------ | -------- | -------- | -------- | -------- |
| 브로드캐스트 주소 | 103.9.32.191 | 01100111 | 00001001 | 00100000 | 10111111 |
| 첫 번째 주소      | 103.9.32.129 | 01100111 | 00001001 | 00100000 | 10000001 |
| 마지막 주소       | 103.9.32.190 | 01100111 | 00001001 | 00100000 | 10111110 |

출처: <IT엔지니어를 위한 네트워크 입문>
